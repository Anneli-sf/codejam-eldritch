(()=>{"use strict";const e=[{id:"azathoth",name:"azathoth",firstStage:{greenCards:1,blueCards:1,brownCards:2},secondStage:{greenCards:2,blueCards:1,brownCards:3},thirdStage:{greenCards:2,blueCards:0,brownCards:4}},{id:"cthulhu",name:"cthulhu",firstStage:{greenCards:0,blueCards:2,brownCards:2},secondStage:{greenCards:1,blueCards:0,brownCards:3},thirdStage:{greenCards:3,blueCards:0,brownCards:4}},{id:"iogSothoth",name:"iogSothoth",firstStage:{greenCards:0,blueCards:1,brownCards:2},secondStage:{greenCards:2,blueCards:1,brownCards:3},thirdStage:{greenCards:3,blueCards:0,brownCards:4}},{id:"shubNiggurath",name:"shubNiggurath",firstStage:{greenCards:1,blueCards:1,brownCards:2},secondStage:{greenCards:3,blueCards:1,brownCards:2},thirdStage:{greenCards:2,blueCards:0,brownCards:4}}],r=document.querySelector("#green1"),c=document.querySelector("#green2"),a=document.querySelector("#green3"),i=document.querySelector("#brown1"),d=document.querySelector("#brown2"),n=document.querySelector("#brown3"),l=document.querySelector("#blue1"),t=document.querySelector("#blue2"),s=document.querySelector("#blue3");function o(){r.textContent=x.level_1[0],c.textContent=x.level_2[0],a.textContent=x.level_3[0],i.textContent=x.level_1[1],d.textContent=x.level_2[1],n.textContent=x.level_3[1],l.textContent=x.level_1[2],t.textContent=x.level_2[2],s.textContent=x.level_3[2],x.level_1[0]?(L.classList.add("active"),x.level_1[0]--):x.level_1[1]?x.level_1[1]--:x.level_1[2]?x.level_1[2]--:x.level_2[0]?(L.classList.remove("active"),q.classList.add("active"),x.level_2[0]--):x.level_2[1]?x.level_2[1]--:x.level_2[2]?x.level_2[2]--:x.level_3[0]?(x.level_3[0]--,q.classList.remove("active"),G.classList.add("active")):x.level_3[1]?x.level_3[1]--:x.level_3[2]&&x.level_3[2]--}const g=[{id:"blue1",cardFace:"./images/img/Mistic_cards/Blue/blue1.png",difficulty:"hard",color:"blue"},{id:"blue2",cardFace:"./images/img/Mistic_cards/Blue/blue2.png",difficulty:"hard",color:"blue"},{id:"blue3",cardFace:"./images/img/Mistic_cards/Blue/blue3.png",difficulty:"easy",color:"blue"},{id:"blue4",cardFace:"./images/img/Mistic_cards/Blue/blue4.png",difficulty:"easy",color:"blue"},{id:"blue5",cardFace:"./images/img/Mistic_cards/Blue/blue5.png",difficulty:"easy",color:"blue"},{id:"blue6",cardFace:"./images/img/Mistic_cards/Blue/blue6.png",difficulty:"hard",color:"blue"},{id:"blue7",cardFace:"./images/img/Mistic_cards/Blue/blue7.png",difficulty:"normal",color:"blue"},{id:"blue8",cardFace:"./images/img/Mistic_cards/Blue/blue8.png",difficulty:"hard",color:"blue"},{id:"blue9",cardFace:"./images/img/Mistic_cards/Blue/blue9.png",difficulty:"normal",color:"blue"},{id:"blue10",cardFace:"./images/img/Mistic_cards/Blue/blue10.png",difficulty:"easy",color:"blue"},{id:"blue11",cardFace:"./images/img/Mistic_cards/Blue/blue11.png",difficulty:"normal",color:"blue"},{id:"blue12",cardFace:"./images/img/Mistic_cards/Blue/blue12.png",difficulty:"normal",color:"blue"}],u=[{id:"green1",cardFace:"./images/img/Mistic_cards/Green/green1.png",difficulty:"easy",color:"green"},{id:"green2",cardFace:"./images/img/Mistic_cards/Green/green2.png",difficulty:"hard",color:"green"},{id:"green3",cardFace:"./images/img/Mistic_cards/Green/green3.png",difficulty:"hard",color:"green"},{id:"green4",cardFace:"./images/img/Mistic_cards/Green/green4.png",difficulty:"hard",color:"green"},{id:"green5",cardFace:"./images/img/Mistic_cards/Green/green5.png",difficulty:"hard",color:"green"},{id:"green6",cardFace:"./images/img/Mistic_cards/Green/green6.png",difficulty:"hard",color:"green"},{id:"green7",cardFace:"./images/img/Mistic_cards/Green/green7.png",difficulty:"normal",color:"green"},{id:"green8",cardFace:"./images/img/Mistic_cards/Green/green8.png",difficulty:"normal",color:"green"},{id:"green9",cardFace:"./images/img/Mistic_cards/Green/green9.png",difficulty:"normal",color:"green"},{id:"green10",cardFace:"./images/img/Mistic_cards/Green/green10.png",difficulty:"normal",color:"green"},{id:"green11",cardFace:"./images/img/Mistic_cards/Green/green11.png",difficulty:"normal",color:"green"},{id:"green12",cardFace:"./images/img/Mistic_cards/Green/green12.png",difficulty:"easy",color:"green"},{id:"green13",cardFace:"./images/img/Mistic_cards/Green/green13.png",difficulty:"normal",color:"green"},{id:"green14",cardFace:"./images/img/Mistic_cards/Green/green14.png",difficulty:"normal",color:"green"},{id:"green15",cardFace:"./images/img/Mistic_cards/Green/green15.png",difficulty:"normal",color:"green"},{id:"green16",cardFace:"./images/img/Mistic_cards/Green/green16.png",difficulty:"easy",color:"green"},{id:"green17",cardFace:"./images/img/Mistic_cards/Green/green17.png",difficulty:"easy",color:"green"},{id:"green18",cardFace:"./images/img/Mistic_cards/Green/green18.png",difficulty:"easy",color:"green"}],m=[{id:"brown1",cardFace:"./images/img/Mistic_cards/Brown/brown1.png",difficulty:"normal",color:"brown"},{id:"brown2",cardFace:"./images/img/Mistic_cards/Brown/brown2.png",difficulty:"normal",color:"brown"},{id:"brown3",cardFace:"./images/img/Mistic_cards/Brown/brown3.png",difficulty:"normal",color:"brown"},{id:"brown4",cardFace:"./images/img/Mistic_cards/Brown/brown4.png",difficulty:"normal",color:"brown"},{id:"brown5",cardFace:"./images/img/Mistic_cards/Brown/brown5.png",difficulty:"normal",color:"brown"},{id:"brown6",cardFace:"./images/img/Mistic_cards/Brown/brown6.png",difficulty:"hard",color:"brown"},{id:"brown7",cardFace:"./images/img/Mistic_cards/Brown/brown7.png",difficulty:"hard",color:"brown"},{id:"brown8",cardFace:"./images/img/Mistic_cards/Brown/brown8.png",difficulty:"hard",color:"brown"},{id:"brown9",cardFace:"./images/img/Mistic_cards/Brown/brown9.png",difficulty:"hard",color:"brown"},{id:"brown10",cardFace:"./images/img/Mistic_cards/Brown/brown10.png",difficulty:"hard",color:"brown"},{id:"brown11",cardFace:"./images/img/Mistic_cards/Brown/brown11.png",difficulty:"easy",color:"brown"},{id:"brown12",cardFace:"./images/img/Mistic_cards/Brown/brown12.png",difficulty:"easy",color:"brown"},{id:"brown13",cardFace:"./images/img/Mistic_cards/Brown/brown13.png",difficulty:"easy",color:"brown"},{id:"brown14",cardFace:"./images/img/Mistic_cards/Brown/brown14.png",difficulty:"easy",color:"brown"},{id:"brown15",cardFace:"./images/img/Mistic_cards/Brown/brown15.png",difficulty:"normal",color:"brown"},{id:"brown16",cardFace:"./images/img/Mistic_cards/Brown/brown16.png",difficulty:"normal",color:"brown"},{id:"brown17",cardFace:"./images/img/Mistic_cards/Brown/brown17.png",difficulty:"normal",color:"brown"},{id:"brown18",cardFace:"./images/img/Mistic_cards/Brown/brown18.png",difficulty:"normal",color:"brown"},{id:"brown19",cardFace:"./images/img/Mistic_cards/Brown/brown19.png",difficulty:"normal",color:"brown"},{id:"brown20",cardFace:"./images/img/Mistic_cards/Brown/brown20.png",difficulty:"normal",color:"brown"},{id:"brown21",cardFace:"./images/img/Mistic_cards/Brown/brown21.png",difficulty:"easy",color:"brown"}];function b(e){const r=[...e];for(let e=r.length-1;e>0;e--){let c=Math.floor(Math.random()*(e+1));[r[e],r[c]]=[r[c],r[e]]}return r}const f=document.querySelector(".card-deck-open");let F,w=0;function y(){f.innerHTML="";const e=document.createElement("img");f.classList.add("border"),e.src=F[w],f.append(e),w==F.length-1&&(E.classList.remove("visible"),E.removeEventListener("click",y),f.classList.remove("border"),G.classList.remove("active"),M.forEach((e=>e.removeAttribute("disabled",!0))),M.forEach((e=>e.classList.remove("active"))),_.addEventListener("click",A),h.forEach((e=>e.classList.remove("disabled"))),w=-1),w++}function v(r){let c,a,i={cardsGreen:e[k.id].firstStage.greenCards+e[k.id].secondStage.greenCards+e[k.id].thirdStage.greenCards,cardsBrown:e[k.id].firstStage.brownCards+e[k.id].secondStage.brownCards+e[k.id].thirdStage.brownCards,cardsBlue:e[k.id].firstStage.blueCards+e[k.id].secondStage.blueCards+e[k.id].thirdStage.blueCards};if(console.log("sumOfCards",i),r==u&&(a=i.cardsGreen),r==m&&(a=i.cardsBrown),r==g&&(a=i.cardsBlue),console.log("number of colored cards",a),"very-easy"==H.value){d=r,c=[...d].reduce(((e,r,c,a)=>("easy"==r.difficulty&&e.push(r),e)),[]);let e=c.length;if(console.log("number of easy-cards",c.length),e<a)for(let e=0;e<r.length;e++)r=b(r),c.length>=a?c=b(c):"normal"!=r[e].difficulty||c.includes(r[e])||c.push(r[e])}var d;if("easy"==H.value?c=function(e){return[...e].reduce(((e,r,c,a)=>("hard"!=r.difficulty&&e.push(r),e)),[])}(r):"normal"==H.value?c=r:"hard"==H.value&&(c=function(e){return[...e].reduce(((e,r,c,a)=>("easy"!=r.difficulty&&e.push(r),e)),[])}(r)),"very-hard"==H.value){c=function(e){return[...e].reduce(((e,r,c,a)=>("hard"==r.difficulty&&e.push(r),e)),[])}(r);let e=c.length;if(console.log("number of hard cards",c.length),e<a)for(let e=0;e<r.length;e++)r=b(r),c.length>=a?c=b(c):"normal"!=r[e].difficulty||c.includes(r[e])||c.push(r[e])}return b(c)}const _=document.querySelector(".cards"),h=document.querySelectorAll(".card"),C=document.querySelector(".header"),p=document.querySelector(".level-buttons"),M=document.querySelectorAll(".level-button"),S=document.querySelector(".card-deck-button"),B=document.querySelector(".table"),L=document.querySelector("#first-level-title"),q=document.querySelector("#second-level-title"),G=document.querySelector("#third-level-title"),E=document.querySelector(".card-deck-start");E.classList.add("disabled");let k={},x={};function A(e){h.forEach((e=>e.classList.add("disabled"))),h.forEach((e=>e.classList.remove("active"))),_.removeEventListener("click",A),k.id=e.target.id,e.target.closest(".card").classList.add("active"),e.target.closest(".card").classList.remove("disabled"),console.log("currAncient.id",k.id),C.classList.add("visible"),B.classList.remove("visible"),f.innerHTML=""}let H={};_.addEventListener("click",A),p.addEventListener("click",(function(r){var c;f.innerHTML="",B.classList.remove("visible"),M.forEach((e=>e.setAttribute("disabled",!0))),H.value=r.target.id,r.target.classList.add("active"),r.target.removeAttribute("disabled",!0),S.classList.add("visible"),h.forEach((e=>{e.classList.contains("active")||e.classList.add("disabled")})),_.removeEventListener("click",A),c=k.id,x={level_1:[e[c].firstStage.greenCards,e[c].firstStage.brownCards,e[c].firstStage.blueCards],level_2:[e[c].secondStage.greenCards,e[c].secondStage.brownCards,e[c].secondStage.blueCards],level_3:[e[c].thirdStage.greenCards,e[c].thirdStage.brownCards,e[c].thirdStage.blueCards]}})),S.addEventListener("click",(()=>{B.classList.add("visible"),o(),E.classList.add("visible"),S.classList.remove("visible"),0==k.id&&(F=function(){let e=v(u),r=v(g),c=v(m);return[e[0].cardFace,c[0].cardFace,c[1].cardFace,r[0].cardFace,e[1].cardFace,e[2].cardFace,c[2].cardFace,c[3].cardFace,c[4].cardFace,r[1].cardFace,e[3].cardFace,e[4].cardFace,c[5].cardFace,c[6].cardFace,c[7].cardFace,c[8].cardFace]}()),1==k.id&&(F=function(){let e=v(u),r=v(g),c=v(m);return[c[0].cardFace,c[1].cardFace,r[0].cardFace,r[1].cardFace,e[0].cardFace,c[2].cardFace,c[3].cardFace,c[4].cardFace,e[1].cardFace,e[2].cardFace,e[3].cardFace,c[5].cardFace,c[6].cardFace,c[7].cardFace,c[8].cardFace]}()),2==k.id&&(F=function(){let e=v(u),r=v(g),c=v(m);return[c[0].cardFace,c[1].cardFace,r[0].cardFace,e[0].cardFace,e[1].cardFace,c[2].cardFace,c[3].cardFace,c[4].cardFace,r[1].cardFace,e[2].cardFace,e[3].cardFace,e[4].cardFace,c[5].cardFace,c[6].cardFace,c[7].cardFace,c[8].cardFace]}()),3==k.id&&(F=function(){let e=v(u),r=v(g),c=v(m);return[e[0].cardFace,c[0].cardFace,c[1].cardFace,r[0].cardFace,e[1].cardFace,e[2].cardFace,e[3].cardFace,c[2].cardFace,c[3].cardFace,r[1].cardFace,e[4].cardFace,e[5].cardFace,c[4].cardFace,c[5].cardFace,c[6].cardFace,c[7].cardFace]}()),console.log("curr DECK",F),console.log("curr level",H.value),console.log("curr ancient id",k.id)})),E.addEventListener("click",(()=>{y(),o()}))})();