(()=>{"use strict";const e=[{id:"azathoth",name:"azathoth",firstStage:{greenCards:1,blueCards:1,brownCards:2},secondStage:{greenCards:2,blueCards:1,brownCards:3},thirdStage:{greenCards:2,blueCards:0,brownCards:4}},{id:"cthulhu",name:"cthulhu",firstStage:{greenCards:0,blueCards:2,brownCards:2},secondStage:{greenCards:1,blueCards:0,brownCards:3},thirdStage:{greenCards:3,blueCards:0,brownCards:4}},{id:"iogSothoth",name:"iogSothoth",firstStage:{greenCards:0,blueCards:1,brownCards:2},secondStage:{greenCards:2,blueCards:1,brownCards:3},thirdStage:{greenCards:3,blueCards:0,brownCards:4}},{id:"shubNiggurath",name:"shubNiggurath",firstStage:{greenCards:1,blueCards:1,brownCards:2},secondStage:{greenCards:3,blueCards:1,brownCards:2},thirdStage:{greenCards:2,blueCards:0,brownCards:4}}],r=document.querySelector("#green1"),c=document.querySelector("#green2"),a=document.querySelector("#green3"),i=document.querySelector("#brown1"),d=document.querySelector("#brown2"),n=document.querySelector("#brown3"),l=document.querySelector("#blue1"),t=document.querySelector("#blue2"),s=document.querySelector("#blue3");function o(e){!function(e){Math.max(A.level_1[0],A.level_1[1],A.level_1[2])?(q.classList.add("active"),"reen"==e&&A.level_1[0]?A.level_1[0]--:"rown"==e&&A.level_1[1]?A.level_1[1]--:"blue"==e&&A.level_1[2]&&A.level_1[2]--):Math.max(A.level_2[0],A.level_2[1],A.level_2[2])?(q.classList.remove("active"),G.classList.add("active"),"reen"==e&&A.level_2[0]?A.level_2[0]--:"rown"==e&&A.level_2[1]?A.level_2[1]--:"blue"==e&&A.level_2[2]&&A.level_2[2]--):Math.max(A.level_3[0],A.level_3[1],A.level_3[2])&&(G.classList.remove("active"),E.classList.add("active"),"reen"==e&&A.level_3[0]?A.level_3[0]--:"rown"==e&&A.level_3[1]?A.level_3[1]--:"blue"==e&&A.level_3[2]&&A.level_3[2]--)}(e),r.textContent=A.level_1[0],c.textContent=A.level_2[0],a.textContent=A.level_3[0],i.textContent=A.level_1[1],d.textContent=A.level_2[1],n.textContent=A.level_3[1],l.textContent=A.level_1[2],t.textContent=A.level_2[2],s.textContent=A.level_3[2]}const g=[{id:"blue1",cardFace:"./images/img/Mistic_cards/Blue/blue01.png",difficulty:"hard",color:"blue"},{id:"blue2",cardFace:"./images/img/Mistic_cards/Blue/blue02.png",difficulty:"hard",color:"blue"},{id:"blue3",cardFace:"./images/img/Mistic_cards/Blue/blue03.png",difficulty:"easy",color:"blue"},{id:"blue4",cardFace:"./images/img/Mistic_cards/Blue/blue04.png",difficulty:"easy",color:"blue"},{id:"blue5",cardFace:"./images/img/Mistic_cards/Blue/blue05.png",difficulty:"easy",color:"blue"},{id:"blue6",cardFace:"./images/img/Mistic_cards/Blue/blue06.png",difficulty:"hard",color:"blue"},{id:"blue7",cardFace:"./images/img/Mistic_cards/Blue/blue07.png",difficulty:"normal",color:"blue"},{id:"blue8",cardFace:"./images/img/Mistic_cards/Blue/blue08.png",difficulty:"hard",color:"blue"},{id:"blue9",cardFace:"./images/img/Mistic_cards/Blue/blue09.png",difficulty:"normal",color:"blue"},{id:"blue10",cardFace:"./images/img/Mistic_cards/Blue/blue10.png",difficulty:"easy",color:"blue"},{id:"blue11",cardFace:"./images/img/Mistic_cards/Blue/blue11.png",difficulty:"normal",color:"blue"},{id:"blue12",cardFace:"./images/img/Mistic_cards/Blue/blue12.png",difficulty:"normal",color:"blue"}],u=[{id:"green1",cardFace:"./images/img/Mistic_cards/Green/green01.png",difficulty:"easy",color:"green"},{id:"green2",cardFace:"./images/img/Mistic_cards/Green/green02.png",difficulty:"hard",color:"green"},{id:"green3",cardFace:"./images/img/Mistic_cards/Green/green03.png",difficulty:"hard",color:"green"},{id:"green4",cardFace:"./images/img/Mistic_cards/Green/green04.png",difficulty:"hard",color:"green"},{id:"green5",cardFace:"./images/img/Mistic_cards/Green/green05.png",difficulty:"hard",color:"green"},{id:"green6",cardFace:"./images/img/Mistic_cards/Green/green06.png",difficulty:"hard",color:"green"},{id:"green7",cardFace:"./images/img/Mistic_cards/Green/green07.png",difficulty:"normal",color:"green"},{id:"green8",cardFace:"./images/img/Mistic_cards/Green/green08.png",difficulty:"normal",color:"green"},{id:"green9",cardFace:"./images/img/Mistic_cards/Green/green09.png",difficulty:"normal",color:"green"},{id:"green10",cardFace:"./images/img/Mistic_cards/Green/green10.png",difficulty:"normal",color:"green"},{id:"green11",cardFace:"./images/img/Mistic_cards/Green/green11.png",difficulty:"normal",color:"green"},{id:"green12",cardFace:"./images/img/Mistic_cards/Green/green12.png",difficulty:"easy",color:"green"},{id:"green13",cardFace:"./images/img/Mistic_cards/Green/green13.png",difficulty:"normal",color:"green"},{id:"green14",cardFace:"./images/img/Mistic_cards/Green/green14.png",difficulty:"normal",color:"green"},{id:"green15",cardFace:"./images/img/Mistic_cards/Green/green15.png",difficulty:"normal",color:"green"},{id:"green16",cardFace:"./images/img/Mistic_cards/Green/green16.png",difficulty:"easy",color:"green"},{id:"green17",cardFace:"./images/img/Mistic_cards/Green/green17.png",difficulty:"easy",color:"green"},{id:"green18",cardFace:"./images/img/Mistic_cards/Green/green18.png",difficulty:"easy",color:"green"}],m=[{id:"brown1",cardFace:"./images/img/Mistic_cards/Brown/brown01.png",difficulty:"normal",color:"brown"},{id:"brown2",cardFace:"./images/img/Mistic_cards/Brown/brown02.png",difficulty:"normal",color:"brown"},{id:"brown3",cardFace:"./images/img/Mistic_cards/Brown/brown03.png",difficulty:"normal",color:"brown"},{id:"brown4",cardFace:"./images/img/Mistic_cards/Brown/brown04.png",difficulty:"normal",color:"brown"},{id:"brown5",cardFace:"./images/img/Mistic_cards/Brown/brown05.png",difficulty:"normal",color:"brown"},{id:"brown6",cardFace:"./images/img/Mistic_cards/Brown/brown06.png",difficulty:"hard",color:"brown"},{id:"brown7",cardFace:"./images/img/Mistic_cards/Brown/brown07.png",difficulty:"hard",color:"brown"},{id:"brown8",cardFace:"./images/img/Mistic_cards/Brown/brown08.png",difficulty:"hard",color:"brown"},{id:"brown9",cardFace:"./images/img/Mistic_cards/Brown/brown09.png",difficulty:"hard",color:"brown"},{id:"brown10",cardFace:"./images/img/Mistic_cards/Brown/brown10.png",difficulty:"hard",color:"brown"},{id:"brown11",cardFace:"./images/img/Mistic_cards/Brown/brown11.png",difficulty:"easy",color:"brown"},{id:"brown12",cardFace:"./images/img/Mistic_cards/Brown/brown12.png",difficulty:"easy",color:"brown"},{id:"brown13",cardFace:"./images/img/Mistic_cards/Brown/brown13.png",difficulty:"easy",color:"brown"},{id:"brown14",cardFace:"./images/img/Mistic_cards/Brown/brown14.png",difficulty:"easy",color:"brown"},{id:"brown15",cardFace:"./images/img/Mistic_cards/Brown/brown15.png",difficulty:"normal",color:"brown"},{id:"brown16",cardFace:"./images/img/Mistic_cards/Brown/brown16.png",difficulty:"normal",color:"brown"},{id:"brown17",cardFace:"./images/img/Mistic_cards/Brown/brown17.png",difficulty:"normal",color:"brown"},{id:"brown18",cardFace:"./images/img/Mistic_cards/Brown/brown18.png",difficulty:"normal",color:"brown"},{id:"brown19",cardFace:"./images/img/Mistic_cards/Brown/brown19.png",difficulty:"normal",color:"brown"},{id:"brown20",cardFace:"./images/img/Mistic_cards/Brown/brown20.png",difficulty:"normal",color:"brown"},{id:"brown21",cardFace:"./images/img/Mistic_cards/Brown/brown21.png",difficulty:"easy",color:"brown"}];function b(e){const r=[...e];for(let e=r.length-1;e>0;e--){let c=Math.floor(Math.random()*(e+1));[r[e],r[c]]=[r[c],r[e]]}return r}const f=document.querySelector(".card-deck-open");let F,w,v=0;function y(){f.innerHTML="";const e=document.createElement("img");f.classList.add("border"),e.src=F[v],f.append(e),v==F.length-1&&(x.classList.remove("visible"),x.removeEventListener("click",y),f.classList.remove("border"),E.classList.remove("active"),S.forEach((e=>e.removeAttribute("disabled",!0))),S.forEach((e=>e.classList.remove("active"))),h.addEventListener("click",H),C.forEach((e=>e.classList.remove("disabled"))),v=-1),v++,w=e.src,w=w.slice(-10,-6),console.log(w)}function _(r){let c,a,i={cardsGreen:e[k.id].firstStage.greenCards+e[k.id].secondStage.greenCards+e[k.id].thirdStage.greenCards,cardsBrown:e[k.id].firstStage.brownCards+e[k.id].secondStage.brownCards+e[k.id].thirdStage.brownCards,cardsBlue:e[k.id].firstStage.blueCards+e[k.id].secondStage.blueCards+e[k.id].thirdStage.blueCards};if(r==u&&(a=i.cardsGreen),r==m&&(a=i.cardsBrown),r==g&&(a=i.cardsBlue),"very-easy"==T.value&&(d=r,c=[...d].reduce(((e,r,c,a)=>("easy"==r.difficulty&&e.push(r),e)),[]),c.length<a))for(let e=0;e<r.length;e++)r=b(r),c.length>=a?c=b(c):"normal"!=r[e].difficulty||c.includes(r[e])||c.push(r[e]);var d;if("easy"==T.value?c=function(e){return[...e].reduce(((e,r,c,a)=>("hard"!=r.difficulty&&e.push(r),e)),[])}(r):"normal"==T.value?c=r:"hard"==T.value&&(c=function(e){return[...e].reduce(((e,r,c,a)=>("easy"!=r.difficulty&&e.push(r),e)),[])}(r)),"very-hard"==T.value&&(c=function(e){return[...e].reduce(((e,r,c,a)=>("hard"==r.difficulty&&e.push(r),e)),[])}(r),c.length<a))for(let e=0;e<r.length;e++)r=b(r),c.length>=a?c=b(c):"normal"!=r[e].difficulty||c.includes(r[e])||c.push(r[e]);return b(c)}const h=document.querySelector(".cards"),C=document.querySelectorAll(".card"),p=document.querySelector(".header"),M=document.querySelector(".level-buttons"),S=document.querySelectorAll(".level-button"),B=document.querySelector(".card-deck-button"),L=document.querySelector(".table"),q=document.querySelector("#first-level-title"),G=document.querySelector("#second-level-title"),E=document.querySelector("#third-level-title"),x=document.querySelector(".card-deck-start");x.classList.add("disabled");let k={},A={};function H(e){C.forEach((e=>e.classList.add("disabled"))),C.forEach((e=>e.classList.remove("active"))),h.removeEventListener("click",H),k.id=e.target.id,e.target.closest(".card").classList.add("active"),e.target.closest(".card").classList.remove("disabled"),p.classList.add("visible"),L.classList.remove("visible"),f.innerHTML=""}let T={};h.addEventListener("click",H),M.addEventListener("click",(function(r){var c;f.innerHTML="",L.classList.remove("visible"),S.forEach((e=>e.setAttribute("disabled",!0))),T.value=r.target.id,r.target.classList.add("active"),r.target.removeAttribute("disabled",!0),B.classList.add("visible"),C.forEach((e=>{e.classList.contains("active")||e.classList.add("disabled")})),h.removeEventListener("click",H),c=k.id,A={level_1:[e[c].firstStage.greenCards,e[c].firstStage.brownCards,e[c].firstStage.blueCards],level_2:[e[c].secondStage.greenCards,e[c].secondStage.brownCards,e[c].secondStage.blueCards],level_3:[e[c].thirdStage.greenCards,e[c].thirdStage.brownCards,e[c].thirdStage.blueCards]}})),B.addEventListener("click",(()=>{L.classList.add("visible"),o(),x.classList.add("visible"),B.classList.remove("visible"),0==k.id&&(F=function(){let e=_(u),r=_(g),c=_(m),a=[e[0].cardFace,c[0].cardFace,c[1].cardFace,r[0].cardFace],i=[e[1].cardFace,e[2].cardFace,c[2].cardFace,c[3].cardFace,c[4].cardFace,r[1].cardFace],d=[e[3].cardFace,e[4].cardFace,c[5].cardFace,c[6].cardFace,c[7].cardFace,c[8].cardFace];return[b(a),b(i),b(d)].flat()}()),1==k.id&&(F=function(){let e=_(u),r=_(g),c=_(m),a=[c[0].cardFace,c[1].cardFace,r[0].cardFace,r[1].cardFace],i=[e[0].cardFace,c[2].cardFace,c[3].cardFace,c[4].cardFace],d=[e[1].cardFace,e[2].cardFace,e[3].cardFace,c[5].cardFace,c[6].cardFace,c[7].cardFace,c[8].cardFace];return[b(a),b(i),b(d)].flat()}()),2==k.id&&(F=function(){let e=_(u),r=_(g),c=_(m),a=[c[0].cardFace,c[1].cardFace,r[0].cardFace],i=[e[0].cardFace,e[1].cardFace,c[2].cardFace,c[3].cardFace,c[4].cardFace,r[1].cardFace],d=[e[2].cardFace,e[3].cardFace,e[4].cardFace,c[5].cardFace,c[6].cardFace,c[7].cardFace,c[8].cardFace];return[b(a),b(i),b(d)].flat()}()),3==k.id&&(F=function(){let e=_(u),r=_(g),c=_(m),a=[e[0].cardFace,c[0].cardFace,c[1].cardFace,r[0].cardFace],i=[e[1].cardFace,e[2].cardFace,e[3].cardFace,c[2].cardFace,c[3].cardFace,r[1].cardFace],d=[e[4].cardFace,e[5].cardFace,c[4].cardFace,c[5].cardFace,c[6].cardFace,c[7].cardFace];return[b(a),b(i),b(d)].flat()}()),console.log("curr DECK",F),console.log("curr level",T.value),console.log("curr ancient id",k.id)})),x.addEventListener("click",(()=>{y(),o(w)}))})();